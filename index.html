<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Carrossel Loop Infinito Suave</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    .carousel-container {
      max-width: 350px;
      margin: 40px auto;
      overflow: hidden;
      border-radius: 12px;
      box-shadow: 0 2px 10px #0002;
      background: #fff;
    }
    .carousel {
      display: flex;
      width: 100%;
      transition: transform 0.5s;
    }
    .carousel-slide {
      min-width: 100%;
      box-sizing: border-box;
    }
    .slide-link {
      display: block;
      width: 100%;
      height: 100%;
      text-decoration: none;
      color: inherit;
      background: #fafafa;
    }
    .slide-link img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      display: block;
    }
    .slide-desc {
      padding: 16px 14px;
      text-align: center;
      font-size: 1.08em;
    }
    .carousel-nav {
      position: absolute;
      top: 50%;
      width: 38px;
      height: 38px;
      background: #2296f3;
      color: #fff;
      border: none;
      border-radius: 50%;
      font-size: 1.2em;
      cursor: pointer;
      z-index: 10;
      transform: translateY(-50%);
      opacity: 0.92;
      transition: background .2s, opacity .2s;
      box-shadow: 0 2px 5px #0002;
    }
    .carousel-nav.prev { left: 10px; }
    .carousel-nav.next { right: 10px; }
    .carousel-nav:hover { background: #005da3; opacity: 1; }
    .carousel-container { position: relative; }
    @media (max-width:430px) {
      .carousel-container { max-width: 100vw; }
      .slide-link img { height: 115px; }
    }
  </style>
</head>
<body>
  <div class="carousel-container">
    <button class="carousel-nav prev" aria-label="Anterior">&#10094;</button>
    <div class="carousel"></div>
    <button class="carousel-nav next" aria-label="Próximo">&#10095;</button>
  </div>
  <script>
    const slidesData = [
      {
        img: "./img/eurekapod.jpg",
        desc: "🎙️ Eurekapod - O podcast mais doido da internet, todas as terças!",
        link: "eurekapod.html"
      },
      {
        img: "./img/amador2025.png",
        desc: "⚽ Amador Regional 2025 - Todos os jogos do Campeonato LBF 2025",
        link: "https://www.uol.com.br"
      },
      {
        img: "./img/amador2024.jpg",
        desc: "⚽ Amador Do Estado 2024 - Todos os jogos do Campeonato Amador do Estado de São Paulo de 2024",
        link: "amadordoestado2024.html"
      },
	  {
        img: "./img/sub20.jpg",
        desc: "⚽ Paulista Sub 20 2025 - Todos os jogos do Campeonato Paulista Sub 20 de 2025",
        link: "sub20_2025.html"
      },
      {
        img: "./img/sub1517.jpg",
        desc: "⚽ Paulista Sub 15/17 2025 - Todos os jogos dos Campeonatos Paulista Sub 15/17 2025",
        link: "sub1517.html"
      },
      {
        img: "./img/subs2024.jpg",
        desc: "⚽ Paulista Subs 9 a 17 2024 - Todos os jogos dos Campeonatos Paulista Sub 9 a 17 2024",
        link: "subs2024.html"
      }
    ];

     const carousel = document.querySelector('.carousel');
    let slidesWithClones = [];
    let currentIndex = 1; // começa no "primeiro" slide real, por causa do clone!

    function renderSlides() {
      // Clonando o último para o início e primeiro para o final
      slidesWithClones = [
        slidesData[slidesData.length-1], // clone do último
        ...slidesData,
        slidesData[0] // clone do primeiro
      ];
      carousel.innerHTML = "";
      slidesWithClones.forEach(slide => {
        const slideDiv = document.createElement('div');
        slideDiv.className = "carousel-slide";
        slideDiv.innerHTML = `
          <a href="${slide.link}"  rel="noopener" class="slide-link">
            <img src="${slide.img}" alt="${slide.desc}">
            <div class="slide-desc">${slide.desc}</div>
          </a>
        `;
        carousel.appendChild(slideDiv);
      });
      updateSlidePosition({instant:true});
    }

    function updateSlidePosition({instant} = {}) {
      if(instant) {
        carousel.style.transition = "none";
      } else {
        carousel.style.transition = "transform 0.5s";
      }
      carousel.style.transform = `translateX(-${currentIndex * 100}%)`;
    }

    function goToPrevSlide() {
      if (currentIndex <= 0) return;
      currentIndex--;
      updateSlidePosition();
      if (currentIndex === 0) {
        // Chegou no clone do último -> pular para o último real
        setTimeout(() => {
          currentIndex = slidesData.length;
          updateSlidePosition({instant:true});
        }, 500);
      }
    }

    function goToNextSlide() {
      if (currentIndex >= slidesWithClones.length-1) return;
      currentIndex++;
      updateSlidePosition();
      if (currentIndex === slidesWithClones.length-1) {
        // Chegou no clone do primeiro -> pula para o primeiro real
        setTimeout(() => {
          currentIndex = 1;
          updateSlidePosition({instant:true});
        }, 500);
      }
    }

    document.querySelector('.carousel-nav.prev').onclick = goToPrevSlide;
    document.querySelector('.carousel-nav.next').onclick = goToNextSlide;

    // Suporte a teclado
    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowLeft') goToPrevSlide();
      if (e.key === 'ArrowRight') goToNextSlide();
    });

    // Suporte a swipe mobile
    let startX = null;
    carousel.addEventListener('touchstart', e => startX = e.touches[0].clientX);
    carousel.addEventListener('touchend', e => {
      if (startX === null) return;
      const dx = e.changedTouches[0].clientX - startX;
      if (dx > 30) goToPrevSlide();
      if (dx < -30) goToNextSlide();
      startX = null;
    });

    renderSlides();
  </script>
</body>
</html>
